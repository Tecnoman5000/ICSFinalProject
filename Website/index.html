 <!DOCTYPE html>
<html>
<head>
  <title>Welcome</title>
  <link rel="stylesheet" href="styles.css">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  
  <script>
		outside_temp_shown = false;
		previous_minute = 0;
  
		function startTime() {
			var today=new Date();
			var h=today.getHours();
			var m=today.getMinutes();
			var s=today.getSeconds();
			m = checkTime(m);
			s = checkTime(s);
			if (h>12){ //turn the 24 hour clock, into a 12 hour clock
				h = h-12;
				document.getElementById('clock').innerHTML = h+":"+m+":"+s+" PM"; 
			}else{
				document.getElementById('clock').innerHTML = h+":"+m+":"+s+" AM";
			}
			var t = setTimeout(function(){startTime()},500);
			
			if (m > previous_minute && outside_temp_shown){
				outdoor_temp();
				previous_minute = m;
			}else{
				if (m > previous_minute && !outside_temp_shown){
					indoor_temp();
					previous_minute = m;
				}
			}
		}

		function checkTime(i) {
			if (i<10) {i = "0" + i};  // add zero in front of numbers < 10
			return i;
		}
		
		function weather_update(){
			var xmlhttp = new XMLHttpRequest();
			var url = "http://api.openweathermap.org/data/2.5/weather?q=kingston,canada";
			xmlhttp.open("GET", url, false);
			xmlhttp.send();
			
			console.log(xmlhttp.status);
			console.log(xmlhttp.statusText);
			
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				var api_input = xmlhttp.responseText;
				var weather_outside_info = JSON.parse(api_input);
			}
			
			return (weather_outside_info.main.temp - 273.15) //return the current temp in C
		}

		function indoor_temp(){
			document.getElementById("temp").innerHTML = "22&#176C";
			outside_temp_shown = false;
		}
		
		function outdoor_temp(){
			document.getElementById("temp").innerHTML = Math.round(weather_update())+"&#176C"; //get current outside temp from api
			outside_temp_shown = true;		
		}

		function add_warning(){
			// Find a <table> element with id="warnings_table":
			var table = document.getElementById("warnings_table");

			// Create an empty <tr> element and add it to the 2nd position of the table:
			var row = table.insertRow(1);

			// Insert new cells (<td> elements) at the 1st position of the "new" <tr> element:
			var cell1 = row.insertCell(0);
			cell1.style.backgroundColor = "red";

			// Add some text to the new cells:
			cell1.innerHTML = "Motion Detected!";
		}
		
		/*function remove_warnings(){
			
		}*/

	</script>
</head>
<body onload="startTime()">
	<table id="main_table">
		<tr id="main_row">
			<td id="main_menu_column">
				<table id="menu_table">
					<tr class="menu_row">
						<td class="menu_content">
							<h1>Menu</h1>
						</td>
					</tr>
					<tr class="menu_row">
						<td class="menu_content">
							<h1>Home</h1>
						</td>
					</tr>
					<tr>
						<td class="menu_content">
							<button onclick="add_warning()">Add Warning</button>
						</td>
					</tr>
					<tr>
						<td class="menu_content">
							<button onclick="indoor_temp()">Indoor Temp</button>
						</td>
					</tr>	
					<tr>
						<td class="menu_content">
							<button onclick="outdoor_temp()">Outdoor Temp</button>
						</td>
					</tr>
					<tr>
						<td class="menu_content">
							<button onclick="weather_update()">Update Temp</button>
						</td>
					</tr>
				</table>
			</td>
			<td class="main_mid_column"  align="center">
				<table id="content_table">
					<tr class="content_row" align="center">
						<td id="content_weather"> 
							<table id="weather_table">
								<tr id="weather_row">
									<td id="weather_content">
										<h1 id="temp">-6&#176C</h1>
									</td>
								</tr>
								<tr id="time_row">
									<td id="time_content">
										<div id="clock"></div> <!-- clock -->
									</td>
								</tr>
							</table>
						</td>
					</tr>
					<tr align="center">
						<td id="content_video_feed" align="center">
							<h1>Video Feed</h1>
						</td>
					</tr>
				</table>
			</td>
			<td id="main_warnings_column">
				<table id="warnings_table">
					<tr>
						<td>
							<h1>Warnings</h1>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
</body>
</html> 
